#N canvas 464 72 890 547 10;
#X obj 29 42 cnv 15 440 220 empty \$1-main_canvas_rcv empty 8 12 0 14 #ffe3c6 #404040 0;
#X obj 42 144 hsl 128 15 1 50 0 1 \$1-numsteps_playing \$1-numsteps_playing_rcv number\ of\ steps -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 7900 1;
#X obj 42 164 hsl 128 15 0 1 0 1 \$1-randomchance \$1-randomchance_rcv chance\ of\ playback -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 6200 1;
#X obj 41 55 tgl 25 1 \$1-playstop \$1-playstop_rcv Play/Stop 26 7 0 10 #c6ffc7 #000000 #000000 0 1;
#X obj 42 182 hsl 128 15 0 1 0 1 \$1-reversechance \$1-reversechance_rcv chance\ of\ reverse -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 5700 1;
#N canvas 307 25 954 680 guts 0;
#X obj 21 325 *~;
#X obj 49 296 line~;
#X msg 46 266 1 20;
#X obj 38 241 t b b;
#X msg 86 266 0;
#X obj 140 237 t b b;
#X obj 54 176 sel 0 1;
#X msg 791 391 \; pd dsp 1;
#X obj 795 368 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 791 309 loadbang;
#X obj 791 337 delay 1000;
#X obj 147 327 *~;
#X msg 121 259 0 1000;
#N canvas 184 25 845 847 clocking 0;
#X floatatom 150 92 5 0 0 0 - - - 0;
#X obj 183 516 spigot;
#X obj 77 211 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 79 281 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 78 330 + 1;
#X floatatom 76 363 5 0 0 0 - - - 0;
#X msg 77 304 1;
#X obj 74 389 %;
#X floatatom 73 432 5 0 0 0 - - - 0;
#X obj 77 248 metro 200;
#X obj 162 190 abs;
#X floatatom 162 211 5 0 0 0 - - - 0;
#X obj 162 168 - 680;
#X obj 147 112 * 600;
#X obj 324 513 sel 0;
#X obj 322 542 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 343 611 1;
#X msg 313 613 0;
#X obj 327 662 change;
#X obj 348 361 ys.randomarray 100;
#X floatatom 348 382 5 0 0 0 - - - 0;
#X obj 390 399 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 309 419 spigot;
#X floatatom 309 440 5 0 0 0 - - - 0;
#X floatatom 362 64 5 0 0 0 - - - 0;
#X obj 362 84 expr 60000 / $f1;
#X floatatom 362 105 5 0 0 0 - - - 0;
#X obj 323 131 / 4;
#X floatatom 323 152 5 0 0 0 - - - 0;
#X obj 400 256 s rate_rcv;
#X obj 428 434 sel 0;
#X text 226 513 why?!;
#X obj 174 292 r \$1-numsteps_playing;
#X obj 426 394 r \$1-rate_variation;
#X obj 163 60 r \$1-rate;
#X obj 362 43 r \$1-bpm;
#X obj 159 266 r \$1-play_next;
#X obj 75 170 r \$1-playstop;
#X obj 71 515 s \$1-mastercounter;
#X obj 181 555 s \$1-location_view;
#X obj 223 486 r \$1-playstop;
#X obj 369 499 s \$1-rate_rcv;
#X obj 327 683 s \$1-loop_light;
#X msg 171 381 \; \$2-location_view range 0 \$1;
#X obj 215 328 i \$1;
#X obj 193 352 pack 0 0;
#X obj 247 313 loadbang;
#X floatatom 158 320 5 0 0 0 - - - 0;
#X obj 144 357 f;
#X obj 135 437 sel 0;
#X msg 135 458 0;
#X obj 318 184 i;
#X floatatom 318 205 5 0 0 0 - - - 0;
#X obj 318 225 change;
#X obj 548 246 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 547 295 + 1;
#X floatatom 545 328 5 0 0 0 - - - 0;
#X msg 546 269 1;
#X obj 643 257 r \$1-numsteps_playing;
#X obj 567 198 r \$1-play_next;
#X floatatom 627 285 5 0 0 0 - - - 0;
#X obj 606 398 >;
#X obj 613 322 i;
#X obj 606 419 tgl 16 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 605 460 sel 0 1;
#X obj 563 458 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X msg 624 511 0;
#X obj 525 520 moses;
#X obj 580 494 + 1;
#X text 650 361 new system for controlling number of steps in sequence! i think this is better.;
#X text 32 334 OLD;
#X obj 624 645 s looplight;
#X msg 661 566 1;
#X obj 623 547 sel 0;
#X msg 623 582 0;
#X obj 61 491 print mastercounter;
#X connect 0 0 13 0;
#X connect 2 0 9 0;
#X connect 3 0 6 0;
#X connect 3 0 48 0;
#X connect 4 0 5 0;
#X connect 5 0 4 1;
#X connect 5 0 7 0;
#X connect 6 0 4 0;
#X connect 8 0 1 0;
#X connect 8 0 14 0;
#X connect 8 0 19 0;
#X connect 8 0 38 0;
#X connect 8 0 39 0;
#X connect 8 0 49 0;
#X connect 8 0 75 0;
#X connect 9 0 3 0;
#X connect 9 0 54 0;
#X connect 10 0 11 0;
#X connect 11 0 9 1;
#X connect 12 0 10 0;
#X connect 13 0 12 0;
#X connect 14 0 15 0;
#X connect 14 1 16 0;
#X connect 15 0 17 0;
#X connect 16 0 18 0;
#X connect 17 0 18 0;
#X connect 18 0 42 0;
#X connect 19 0 20 0;
#X connect 20 0 22 0;
#X connect 21 0 22 1;
#X connect 21 0 30 0;
#X connect 22 0 23 0;
#X connect 22 0 41 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 51 0;
#X connect 30 0 24 0;
#X connect 32 0 45 0;
#X connect 32 0 47 0;
#X connect 33 0 21 0;
#X connect 34 0 0 0;
#X connect 35 0 24 0;
#X connect 36 0 3 0;
#X connect 37 0 2 0;
#X connect 40 0 1 1;
#X connect 44 0 45 1;
#X connect 45 0 43 0;
#X connect 46 0 44 0;
#X connect 47 0 48 1;
#X connect 48 0 7 1;
#X connect 49 0 50 0;
#X connect 51 0 52 0;
#X connect 52 0 53 0;
#X connect 53 0 29 0;
#X connect 53 0 9 1;
#X connect 54 0 57 0;
#X connect 54 0 62 0;
#X connect 55 0 56 0;
#X connect 56 0 55 1;
#X connect 56 0 61 0;
#X connect 56 0 65 0;
#X connect 56 0 67 0;
#X connect 56 0 73 0;
#X connect 57 0 55 0;
#X connect 58 0 60 0;
#X connect 59 0 54 0;
#X connect 60 0 62 1;
#X connect 61 0 63 0;
#X connect 62 0 61 1;
#X connect 62 0 68 0;
#X connect 63 0 64 0;
#X connect 64 1 66 0;
#X connect 66 0 56 0;
#X connect 67 0 8 0;
#X connect 68 0 67 1;
#X connect 72 0 71 0;
#X connect 73 0 74 0;
#X connect 73 1 72 0;
#X connect 74 0 71 0;
#X restore 69 456 pd clocking;
#X msg 79 90 vis 1 1;
#X obj 883 430 s dsp_on_bang;
#X obj 883 398 delay 100;
#X obj 216 576 writesf~ 2;
#X msg 303 482 start;
#X msg 308 508 stop;
#X obj 442 461 random 50000;
#X obj 389 338 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 327 419 delay 60000;
#X obj 416 378 t b b b;
#X msg 238 312 50;
#X obj 241 283 loadbang;
#X text 230 114 argument is number of samples to play (num_voices);
#N canvas 467 110 768 371 randomslopes 0;
#X obj 484 461 s pitchrange_rcv;
#X obj 109 461 s randomchance_rcv;
#X obj 351 461 s reversechance_rcv;
#X obj 230 462 s volume_rand_rcv;
#X obj 50 43 hsl 128 15 0 1023 0 0 empty empty empty -2 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 36 105 \$1 50;
#X obj 36 126 line;
#X obj 106 402 ys.randomslopes 1;
#X obj 225 401 ys.randomslopes 2;
#X obj 348 401 ys.randomslopes 3;
#X obj 481 408 ys.randomslopes 4;
#X floatatom 44 9 5 0 0 0 - - - 0;
#X obj 36 63 / 1023;
#X text 132 361 old system (uses 0-44100);
#X obj 44 251 s \$1-randomchance_rcv;
#X obj 165 252 s \$1-volume_rand_rcv;
#X obj 286 251 s \$1-reversechance_rcv;
#X obj 419 251 s \$1-pitchrange_rcv;
#X obj 94 5 r \$1-randomiser;
#X obj 36 166 ys.random_tables 1 \$1;
#X obj 157 164 ys.random_tables 2 \$1;
#X obj 280 164 ys.random_tables 3 \$1;
#X obj 396 162 ys.random_tables 4 \$1;
#X text 217 75 this was from the original Book of Knowledge instrument. Not using it just now but might be fun to revisit.;
#X connect 4 0 12 0;
#X connect 5 0 6 0;
#X connect 6 0 22 0;
#X connect 6 0 19 0;
#X connect 6 0 20 0;
#X connect 6 0 21 0;
#X connect 7 0 1 0;
#X connect 8 0 3 0;
#X connect 9 0 2 0;
#X connect 10 0 0 0;
#X connect 11 0 4 0;
#X connect 12 0 5 0;
#X connect 18 0 4 0;
#X connect 19 0 14 0;
#X connect 20 0 15 0;
#X connect 21 0 16 0;
#X connect 22 0 17 0;
#X restore 154 459 pd randomslopes;
#X msg 434 180 audio-properties;
#X obj 434 218 s pd;
#X msg 305 184 midi-properties;
#X obj 542 86 hsl 128 15 0 1023 0 0 \$1-randomiser \$1-randomiser_rcv randomiser -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 0 1;
#X text 229 132 change this to stereo if desired (then restart);
#X msg 404 538 open recordings/record_\$1.wav;
#X obj 540 63 hsl 128 15 0 1 0 1 \$1-rate \$1-rate_rcv playback\ rate -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 1270 1;
#X text 40 327 why was this here;
#X obj 51 413 sample_selector \$1 \$2;
#X obj 394 307 r \$1-record_one_minute;
#X obj 84 585 outlet~;
#X obj 147 587 outlet~;
#X obj 58 515 catch~ \$1-audiooutL;
#X obj 188 513 catch~ \$1-audiooutR;
#X obj 144 163 throw~ \$1-audiooutL;
#X obj 270 165 throw~ \$1-audiooutR;
#X obj 54 154 r \$1-playstop;
#X obj 39 213 r \$1-play;
#X obj 110 213 r \$1-stop;
#X obj 239 347 s \$1-numsteps;
#X text 678 71 vestigial things;
#X obj 47 23 loadbang;
#X obj 47 57 s \$1-new_seed_rcv;
#N canvas 63 88 450 300 (subpatch) 0;
#X array hann 441 float 1;
#A 0 5.58197e-05 0.000211179 0.000466049 0.000820369 0.00127408 0.00182706 0.00248876 0.00325206 0.00411421 0.00507513 0.00613457 0.00729233 0.00855508 0.00992075 0.0113839 0.0129444 0.0146018 0.0163559 0.0182106 0.0201685 0.022222 0.0243706 0.026614 0.0289515 0.0313846 0.0339207 0.0365494 0.0392705 0.0420832 0.0449872 0.0479817 0.0510767 0.0542615 0.0575351 0.0608967 0.0643458 0.0678817 0.0715112 0.0752289 0.0790311 0.082917 0.086886 0.0909373 0.0950752 0.0992985 0.103601 0.107983 0.112443 0.11698 0.121597 0.126294 0.131067 0.135912 0.140831 0.14582 0.150882 0.15602 0.161227 0.166501 0.171841 0.177247 0.182717 0.188257 0.19386 0.199524 0.205248 0.211031 0.216871 0.222772 0.22873 0.234743 0.240808 0.246925 0.253092 0.259311 0.265581 0.271898 0.27826 0.284667 0.291116 0.297608 0.304145 0.31072 0.317332 0.323982 0.330666 0.337384 0.344138 0.350924 0.357738 0.364582 0.371452 0.378348 0.38527 0.392216 0.399183 0.406171 0.413177 0.4202 0.427241 0.434296 0.441365 0.448445 0.455536 0.462635 0.469742 0.476856 0.483974 0.491096 0.498219 0.505343 0.512465 0.519585 0.526701 0.533812 0.540915 0.548011 0.555097 0.562171 0.569233 0.57628 0.583313 0.590329 0.597327 0.604304 0.611259 0.618192 0.625102 0.631987 0.638845 0.645674 0.652473 0.659241 0.665977 0.67268 0.679349 0.685981 0.692573 0.699126 0.70564 0.712113 0.718544 0.72493 0.731267 0.737558 0.743801 0.749996 0.756142 0.762236 0.768272 0.774255 0.780182 0.786054 0.791869 0.797626 0.803318 0.808948 0.814517 0.820022 0.825465 0.830842 0.836149 0.841386 0.846554 0.851654 0.856683 0.861642 0.866525 0.87133 0.876061 0.880717 0.885297 0.8898 0.894225 0.898563 0.902821 0.906999 0.911096 0.915111 0.919044 0.922885 0.926639 0.930309 0.933894 0.937391 0.940802 0.944118 0.947342 0.950477 0.953522 0.956477 0.959341 0.962108 0.964778 0.967354 0.969838 0.972228 0.974525 0.976724 0.978819 0.980819 0.982723 0.984531 0.986243 0.987857 0.989363 0.990772 0.992083 0.993295 0.99441 0.995426 0.996334 0.997141 0.997848 0.998457 0.998966 0.999376 0.99968 0.999879 0.999978 0.999978 0.999879 0.999679 0.999376 0.998966 0.998457 0.997848 0.99714 0.996333 0.995426 0.994409 0.993295 0.992082 0.990771 0.989362 0.987857 0.986242 0.98453 0.982722 0.980818 0.978818 0.976722 0.974523 0.972227 0.969837 0.967353 0.964776 0.962107 0.959339 0.956475 0.95352 0.950475 0.94734 0.944116 0.9408 0.937389 0.933891 0.930307 0.926637 0.922882 0.919042 0.915109 0.911094 0.906997 0.902818 0.89856 0.894222 0.889797 0.885294 0.880714 0.876058 0.871327 0.866522 0.861639 0.85668 0.851651 0.846551 0.841383 0.836146 0.830839 0.825461 0.820019 0.814513 0.808945 0.803315 0.797622 0.791865 0.786051 0.780179 0.774251 0.768269 0.762232 0.756138 0.749993 0.743798 0.737554 0.731263 0.724926 0.71854 0.712109 0.705636 0.699123 0.692569 0.685977 0.679345 0.672676 0.665973 0.659237 0.652469 0.64567 0.638841 0.631983 0.625098 0.618188 0.611255 0.604299 0.597323 0.590325 0.583309 0.576276 0.569229 0.562167 0.555093 0.548007 0.540911 0.533807 0.526697 0.519581 0.512461 0.505338 0.498215 0.491092 0.48397 0.476852 0.469738 0.462631 0.455531 0.448441 0.441361 0.434292 0.427236 0.420196 0.413173 0.406167 0.399179 0.392212 0.385266 0.378344 0.371448 0.364578 0.357734 0.350919 0.344134 0.33738 0.330662 0.323978 0.317328 0.310716 0.304141 0.297604 0.291112 0.284663 0.278257 0.271894 0.265578 0.259307 0.253088 0.246921 0.240804 0.234739 0.228727 0.222768 0.216867 0.211027 0.205245 0.199521 0.193857 0.188254 0.182714 0.177243 0.171838 0.166497 0.161223 0.156016 0.150878 0.145817 0.140827 0.135909 0.131063 0.126291 0.121593 0.116977 0.11244 0.10798 0.103598 0.0992954 0.0950722 0.0909344 0.086883 0.0829141 0.0790282 0.075226 0.0715085 0.0678789 0.0643432 0.0608941 0.0575325 0.054259 0.0510742 0.0479794 0.0449848 0.042081 0.0392683 0.0365472 0.0339186 0.0313826 0.0289496 0.026612 0.0243689 0.0222203 0.0201668 0.018209 0.0163543 0.0146004 0.012943 0.0113826 0.00991952 0.00855392 0.00729129 0.00613356 0.00507423 0.00411341 0.00325134 0.00248814 0.00182652 0.00127363 0.000820011 0.00046578 0.00021103 5.57601e-05 0;
#X coords 0 1 440 0 200 140 1 0 0;
#X restore 660 526 graph;
#X obj 303 273 r \$1-seed;
#X obj 303 294 t b;
#X obj 35 119 clone ys.agency_mono 7 \$1;
#X connect 1 0 0 1;
#X connect 1 0 11 1;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 3 1 4 0;
#X connect 4 0 1 0;
#X connect 5 0 12 0;
#X connect 6 0 5 0;
#X connect 6 1 3 0;
#X connect 8 0 7 0;
#X connect 8 0 16 0;
#X connect 9 0 10 0;
#X connect 10 0 8 0;
#X connect 12 0 1 0;
#X connect 14 0 54 0;
#X connect 16 0 15 0;
#X connect 18 0 17 0;
#X connect 19 0 17 0;
#X connect 20 0 33 0;
#X connect 21 0 23 0;
#X connect 22 0 19 0;
#X connect 23 0 22 0;
#X connect 23 1 18 0;
#X connect 23 2 20 0;
#X connect 24 0 47 0;
#X connect 25 0 24 0;
#X connect 28 0 29 0;
#X connect 30 0 29 0;
#X connect 33 0 17 0;
#X connect 37 0 21 0;
#X connect 40 0 17 0;
#X connect 40 0 38 0;
#X connect 41 0 17 1;
#X connect 41 0 39 0;
#X connect 44 0 6 0;
#X connect 45 0 3 0;
#X connect 46 0 5 0;
#X connect 52 0 53 0;
#X connect 53 0 24 0;
#X connect 54 0 0 0;
#X connect 54 0 42 0;
#X connect 54 1 11 0;
#X connect 54 1 43 0;
#X restore 372 299 pd guts;
#X obj 43 86 hsl 128 15 0 31.4803 0 0 empty \$1-location_view timing -2 8 1 12 #c4c4fc #c4fcfc #000000 0 1;
#X obj 41 124 hsl 128 15 0 1 0 1 \$1-fadeout \$1-fadeout_rcv fadeout -2 8 1 12 #fc0400 #fcfcfc #fcfcfc 900 0;
#X obj 42 220 hsl 128 15 0 1 0 1 \$1-pan_rand \$1-pan_rand_rcv pan\ randomise -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 4400 1;
#X obj 190 200 bng 15 250 50 0 \$1-record_one_minute empty record\ one\ minute 17 7 0 10 #ffe3c6 #000000 #000000;
#X obj 326 131 nbx 5 14 -1e+37 1e+37 0 1 \$1-num_voices \$1-num_voices_rcv number\ of\ voices 0 -8 0 14 #ffe3c6 #000000 #000000 7 256;
#X obj 327 222 nbx 5 14 -1e+37 1e+37 0 1 \$1-numsamples \$1-numsamples_rcv number\ of\ samples 0 -8 0 14 #ffe3c6 #000000 #000000 63 256;
#X text 321 147 (also change in guts);
#X obj 123 105 tgl 15 0 \$1-rate_variation \$1-rate_variation_rcv rate\ variation 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 42 201 hsl 128 15 0 1 0 1 \$1-pitchrange \$1-pitchrange_rcv pitch\ range -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 0 1;
#X obj 39 105 nbx 5 14 20 200 0 1 \$1-bpm \$1-bpm_rcv bpm 60 8 0 10 #fcfcfc #000000 #000000 124 256;
#X obj 130 55 bng 25 250 50 0 \$1-play_next \$1-play_next_rcv play\ next 27 5 0 10 #c6ffc7 #000000 #000000;
#X obj 358 336 outlet~;
#X obj 416 335 outlet~;
#X obj 325 182 nbx 5 14 -1e+37 1e+37 0 1 empty \$1-seed current\ seed 0 -8 0 14 #ffe3c6 #000000 #000000 95 256;
#X obj 326 58 bng 25 250 50 0 \$1-new_seed \$1-new_seed_rcv new\ seed 27 5 0 10 #c6ffc7 #000000 #000000;
#X obj 571 196 nbx 5 17 -1e+37 1e+37 0 1 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 95 256;
#X obj 569 43 loadbang;
#X obj 570 118 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 570 164 +;
#X msg 570 142 1;
#X msg 551 314 menusave;
#X obj 548 358 s pd-subpatch;
#N canvas 96 86 771 708 subpatch 0;
#X coords 0 -1 1 1 50 50 1 100 100;
#X restore 558 384 pd subpatch;
#X obj 550 235 t b f;
#X obj 645 243 s \$1-seed;
#X obj 615 272 print \$1-seed;
#X obj 636 88 r \$1-new_seed;
#X obj 42 239 hsl 128 15 0 1 0 1 \$1-volume_rand \$1-volume_rand_rcv volume\ randomise -2 8 1 12 #fc0400 #9c9c9c #fcfcfc 3300 1;
#X obj 116 407 s debugfademax;
#X floatatom 117 373 5 0 0 0 - - - 0;
#X obj 662 323 s \$1-fadeout_rcv;
#X obj 662 349 s \$1-numsteps_playing_rcv;
#X obj 664 375 s \$1-randomchance_rcv;
#X obj 666 401 s \$1-reversechance_rcv;
#X obj 665 424 s \$1-pitchrange_rcv;
#X obj 668 450 s \$1-pan_rand_rcv;
#X obj 664 473 s \$1-volume_rand_rcv;
#X connect 5 0 17 0;
#X connect 5 1 18 0;
#X connect 21 0 24 1;
#X connect 21 0 29 0;
#X connect 21 0 31 0;
#X connect 22 0 23 0;
#X connect 23 0 25 0;
#X connect 24 0 21 0;
#X connect 25 0 24 0;
#X connect 26 0 27 0;
#X connect 29 0 26 0;
#X connect 29 0 36 0;
#X connect 29 0 37 0;
#X connect 29 0 38 0;
#X connect 29 0 39 0;
#X connect 29 0 40 0;
#X connect 29 0 41 0;
#X connect 29 0 42 0;
#X connect 29 1 30 0;
#X connect 32 0 23 0;
#X connect 35 0 34 0;
#X coords 0 -1 1 1 500 270 1 5 5;
